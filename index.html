
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8" />
    <title>My</title>
    <H3>나의 웹(2567019, 양민영)</H3>
    <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
    <script>
        const brokerUrl = 'wss://damoa.io:9002';
    
        // 고유한 클라이언트 ID 생성 (다른 사용자와 충돌 방지)
        const clientId = 'iot-client-' + Math.random().toString(16).substr(2, 8);
        
        // 별도 인증이 필요 없으므로 options 객체는 간단하게 clientId만 포함
        const options = {
          clientId: clientId,
        };
    
        console.log(`MQTT 브로커(${brokerUrl})에 접속을 시도합니다...`);
        const client = mqtt.connect(brokerUrl, options);
    
        // 1. 브로커 접속 성공 시 실행되는 이벤트
        client.on('connect', () => {
            console.log(`✅ 접속 성공! (클라이언트 ID: ${clientId})`);
    
            // 2. 접속 성공 후 토픽 구독
            const topic = `ewha/0317137263`; // 다른 사용자와 겹치지 않도록 고유한 토픽 사용, 본인학번으로 수정
            client.subscribe(topic, (err) => {
                if (!err) {
                    console.log(`📄 토픽 구독 성공: ${topic}`);
    
                    // 3. 구독 성공 후 해당 토픽으로 메시지 발행
                    //const message = 'Hello, MQTT from browser!';
                    //console.log(`🚀 메시지 발행: "${message}"`);
                    //client.publish(topic, message);
                    client.publish('ewha/checkin', "본인학번 이름");
                } else {
                    console.error('토픽 구독 오류:', err);
                }
            });
        });
    
        // 4. 구독한 토픽으로 메시지가 들어왔을 때 실행되는 이벤트
        client.on('message', (topic, message) => {
            console.log(`${topic} ${message.toString()}`);
            // 1. id가 'main'인 div 요소를 찾습니다.
            const mainDiv = document.getElementById('main');
    
            // 2. 새로 추가할 HTML 코드를 문자열로 만듭니다. (백틱 `` 사용)
            const messageHTML = `
                <div class="message-item">
                    <span>${message.toString()}</span>
                </div>
            `;
    
            // 3. 새로운 HTML을 적용 합니다.
            mainDiv.innerHTML = messageHTML;
            
            // 스크롤을 항상 아래로 이동시켜 최신 메시지를 보여줍니다.
            mainDiv.scrollTop = mainDiv.scrollHeight;
    
            // 모든 작업 완료 후 접속 종료
            //client.end();
            //console.log('🔚 작업 완료 후 접속을 종료합니다.');
        });
        
        // 접속 중 에러 발생 시
        client.on('error', (err) => {
            console.error('연결 오류:', err);
            client.end();
        });
    </script>
</head>
 
<body>
<div id="main"></div>
<p> 2567019 양민영입니다.
<br>저는 1일, 4일, 8일 수업을 듣지 못한 상태입니다.
<br> 왜냐? 잘 듣던 강의가 추가 폐강 되었기 때문이죠 하하. </p>

<OL> 
  <li> 0901_ 오티</li>
	<uL>
  	<li> 챗 gpt 적극 활용</li>
  	<li> 노트북 지참</li>
  	<li> 이해가 안 되어도 그냥 따라가기</li>
	</uL>
  <li> 0904_ 인터넷도구,브라우저,HTML</li>
	<uL>
  	<li> 페이지 소스 보기</li>
  	<li> html test drive</li>
  	<li> 브라우저 없이 웹서버 접속해보기</li>
	<li> html, css, markup language 정보 링크</li>
		<a href="https://www.w3schools.com/">W3School</a>
		<a href="https://www.opentutorials.org/course/2039">생활코딩 HTML 수업</a>
	</uL>
  <li> 0908_ 제출과제 2개 </li>
	<uL>
  	<li> 기상청 RSS 코랩으로 페이지 열기</li>
	<img src="https://github.com/yangyoung63/0904-/blob/main/indexImage1_requests.JPG?raw=true" alt="colab 캡쳐">

  	<li> 내 웹에 이미지요소, 하이퍼텍스트 링크 요소 삽입</li>
	</uL>
  <li> 0911_ 통신, server client </li>
	<uL>
	<li>esp32설치</li>
	<li>공공데이터포털 api 호출</li>
	</uL>
</OL>

<br>
<ul>
	<li>0904 질문</li>
		<ol>
		<li>OL 사이에 li를 안 넣으면 아래처럼 출력됩니다.
		<OL> 
  		0901_ 오티
  		0904_ 인터넷도구,브라우저,HTML
		</OL>
		</li>

		<li>만약에 li대신 br을 넣는다면?
		<OL> 
 	 	0901_ 오티 <br>
 		 0904_ 인터넷도구,브라우저,HTML <br>
		</OL>
		</li>
		</ol>

	<li>0908 질문</li>
	<ol>
	<li>웹에 이미지를 넣을 때 내 컴퓨터에 있는 개인 이미지를 넣는 방법은 없나?
	<br>내 pc 경로를 올리면 다른 사람 컴퓨터에서는 볼 수 없음. 
	<br>이미지를 github에 올리고 url 사용
	<br>이때 사진 파일의 미리보기 화면에서 "Raw" 버튼을 클릭하라는데 못 찾음.
	</li>
	<li>github에 사진을 업로드하고, 사진 우클릭으로 이미지 주소 복사도 괜찮나요? 모두에게 사진이 뜨나요?</li>
	</ol>
	
	<li>0911 질문</li>
	<ol>
	<li>기존 arduion삭제 방법</li>
	<li>esp32 boards by arduion는 안 설치해도 되나?</li>
	<li>날씨 데이터에서 base_date 변경을 안 하면?
	<br>1일 전 데이터만 열람할 수 있다고 출력됨</li>
	<li>colab으로 출력된 것이 오류인지 아닌지 어떻게 알아?
	<br>resultCode00이 뜬다</li>
	</ol>

</ul>

<br>
<p>수업을 못 들은 제가 앞으로 해야할 일들은요
<uL>
  <li>교수님께 사정을 설명 드려 출석 처리가 어떻게 되는지 여쭤보기 O</li>
  <li>교수님께 사정을 설명 드려 과제 처리가 어떻게 되는지 여쭤보기 O</li>
  <li> 0901_수업 개요 pdf 보기 O</li>
  <li> 0901_수업진행관련 설문 과제O</li>
  <li> 0904_강의자료 pdf 보기 O</li>
  <li> 0904 과제O</li>
	H1, p, ol, ul, br 사용
	<br>-github.com 에 본인 계정하나를 만들고, ROOT 위치의 URL을 제출합니다.
	<br>github에 웹서버를 활성화 시키고 그 URL을 제출합니다.</li>
  <li> 0908 과제O</li>
	이미지요소
	<br>하이퍼텍스트 링크요소
	<br>내 github repository의 commit history 가 정상적으로 나오는지 확인합니다.
  <li> 시험관련 여쭤보기</li>
  <li> 클래스 슬랙 들어가기 O</li>
  <li> 리더보드에 내 이름 들어가기O</li>
</uL>
</body>
</html>
